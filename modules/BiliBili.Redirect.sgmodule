#!name=ğŸ“º BiliBili: ğŸ”€ Redirect
#!desc=å“”å“©å“”å“©ï¼šé‡å®šå‘ï¼ˆè‡ªå®šä¹‰ CDNï¼‰
#!openUrl=http://boxjs.com/#/app/BiliBili.Redirect
#!author=VirgilClyne
#!homepage=https://redirect.biliuniverse.io
#!manual=https://manual.biliuniverse.io
#!icon=https://github.com/BiliUniverse/Redirect/raw/main/src/assets/icon_rounded_108x.png
#!category=ğŸ“º BiliUniverse
#!arguments=Host.Akamaized:upos-sz-mirrorali.bilivideo.com,Host.BStar:upos-sz-mirrorali.bilivideo.com,Host.PCDN:upos-sz-mirrorali.bilivideo.com,Host.MCDN:proxy-tf-all-ws.bilivideo.com
#!arguments-desc=Host.Akamaized: é‡å®šå‘æ¸¯æ¾³å° CDN ä¸»æœºå\nHost.BStar: é‡å®šå‘å›½é™…ç‰ˆ CDN ä¸»æœºå\nHost.PCDN: é‡å®šå‘ PCDN ä¸»æœºå\nHost.MCDN: é‡å®šå‘ MCDN ä¸»æœºå

[General]
# > TCP Force HTTP Hosts
# è®© Surge æŠŠ TCP è¿æ¥å½“ä½œ HTTP è¯·æ±‚æ¥å¤„ç†ã€‚Surge HTTP å¼•æ“å°†å¤„ç†è¿™äº›è¯·æ±‚ï¼Œæ‰€æœ‰çš„é«˜çº§åŠŸèƒ½ï¼Œå¦‚æ•è·ã€é‡å†™å’Œè„šæœ¬ç­‰éƒ½å¯ä»¥ä½¿ç”¨ã€‚
force-http-engine-hosts = %APPEND% *:4480, *.mcdn.bilivideo.cn:4483, *:8000, *:8082, *.mcdn.bilivideo.cn:9102

[Script]
BiliBili.Redirect.CDN.upgcxcode.m4s = type=http-request, pattern=^https?:\/\/.+\.bilivideo\.com\/upgcxcode\/, engine=webview, script-path=https://raw.githubusercontent.com/BiliUniverse/Redirect/main/js/BiliBili.Redirect.request.js, argument=
BiliBili.Redirect.MCDN.v1.resource.m4s = type=http-request, pattern=^https?:\/\/(.+):(8000|8082)\/v1\/resource\/, engine=webview, script-path=https://raw.githubusercontent.com/BiliUniverse/Redirect/main/js/BiliBili.Redirect.request.js, argument=Host.MCDN={{{Host.MCDN}}}
BiliBili.Redirect.MCDN.upgcxcode.m4s = type=http-request, pattern=^https?:\/\/[xy0-9]+\.mcdn\.bilivideo\.(cn|com):(4483|9102)\/upgcxcode\/, engine=webview, script-path=https://raw.githubusercontent.com/BiliUniverse/Redirect/main/js/BiliBili.Redirect.request.js, argument=Host.MCDN={{{Host.MCDN}}}
BiliBili.Redirect.PCDN.upgcxcode.m4s = type=http-request, pattern=^https?:\/\/(.+):4480\/upgcxcode\/, engine=webview, script-path=https://raw.githubusercontent.com/BiliUniverse/Redirect/main/js/BiliBili.Redirect.request.js, argument=Host.PCDN={{{Host.PCDN}}}
BiliBili.Redirect.Akamaized.upgcxcode.m4s = type=http-request, pattern=^https?:\/\/upos-(hz|bstar1)-mirrorakam\.akamaized\.net/upgcxcode\/, engine=webview, script-path=https://raw.githubusercontent.com/BiliUniverse/Redirect/main/js/BiliBili.Redirect.request.js, argument=Host.Akamaized={{{Host.Akamaized}}}

[MITM]
hostname = %APPEND% *.mcdn.bilivideo.cn, upos-sz-mirror*bstar1.bilivideo.com, upos-*-mirrorakam.akamaized.net
